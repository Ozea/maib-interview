(this["webpackJsonpmaib-interview"]=this["webpackJsonpmaib-interview"]||[]).push([[6],{1518:function(e,a,t){"use strict";var n=t(1528),c=t.n(n).a.create();a.a=c},1685:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return J}));var n=t(4),c=t(39),s=t(74),i=t(1475),r=t(1679),d=t(1451),j=t(64),l=t(1684),o=t(1680),b=t(1487),p=t(1673),O=t(1511),u=t(0),x=t(1563),h=t.n(x),f=t(1504),g=t.n(f),m=Object(i.a)((function(e){return{dateRangePicker:{boxShadow:"0px 3px 3px -2px rgba(0,0,0,0.2),0px 3px 4px 0px rgba(0,0,0,0.14),0px 1px 8px 0px rgba(0,0,0,0.12)",width:"347px",marginTop:e.spacing(1.5),"& > div":{backgroundColor:"#80808012",padding:e.spacing(1,3),width:"100%","& > div":{border:"none","& > span":{marginRight:e.spacing(2)},"& input":{color:"#4d4d4d"},"& span":{color:"#4d4d4d"}}}},label:{backgroundColor:"#80808012",padding:e.spacing(1.5,3,0),fontSize:"12px",color:"#4d4d4d"}}})),v=new Date,D=g()(v).add(1,"month").toDate();function S(e){var a=e.onChangeDates,t=e.dates,c=void 0===t?[v,D]:t,i=e.daysBetweenDates,r=(Object(O.a)(e,["onChangeDates","dates","daysBetweenDates"]),Object(u.useState)([])),d=Object(s.a)(r,2),l=d[0],o=d[1],b=m();Object(u.useEffect)((function(){c.length&&o(c)}),[c]);return Object(n.jsx)("form",{children:Object(n.jsxs)("div",{className:b.dateRangePicker,children:[Object(n.jsxs)(j.a,{className:b.label,children:["Last ",i||0," days"]}),Object(n.jsx)(h.a,{onChange:function(e){o(e),a(e)},value:l})]})})}var N=t(1672),w=t(1674),y=t(1675),C=t(1676),I=t(1677),k=t(1678),z=Object(i.a)((function(e){return{paper:{marginLeft:e.spacing(1.75),padding:e.spacing(2,1)},spinner:{margin:e.spacing(3,3,0)}}}));function M(e){var a=e.data,t=e.loading,c=void 0===t||t,i=(Object(O.a)(e,["data","loading"]),Object(u.useState)([])),r=Object(s.a)(i,2),j=r[0],l=r[1],o=z();return Object(u.useEffect)((function(){a&&l(a.items)}),[a]),Object(n.jsx)(N.a,{component:d.a,className:o.paper,children:c?Object(n.jsx)(p.a,{className:o.spinner}):Object(n.jsxs)(w.a,{"aria-label":"simple table",children:[Object(n.jsx)(y.a,{children:Object(n.jsxs)(C.a,{children:[Object(n.jsx)(I.a,{children:Object(n.jsx)("b",{children:"Data"})}),Object(n.jsx)(I.a,{children:Object(n.jsx)("b",{children:"Numar de utilizatori total"})}),Object(n.jsx)(I.a,{children:Object(n.jsx)("b",{children:"Numar de utilizatori unici"})}),Object(n.jsx)(I.a,{children:Object(n.jsx)("b",{children:"Other Data"})})]})}),Object(n.jsx)(k.a,{children:c?null:j.map((function(e){return Object(n.jsxs)(C.a,{children:[Object(n.jsx)(I.a,{children:g()(e.date).format("DD/MM/YYYY")}),Object(n.jsx)(I.a,{children:e.newUsers}),Object(n.jsx)(I.a,{children:e.newUsers}),Object(n.jsx)(I.a,{children:e.otherData})]},e.id)}))})]})})}var P=t(1656),W=t(1500),R=t(1686),B=Object(i.a)((function(e){return{chart:{padding:e.spacing(3,7),"& svg":{"& path":{fill:e.palette.primary.light},"& text":{fill:"#000"}}},paper:{marginLeft:e.spacing(1.75)},titleWrapper:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%","& > *":{color:e.palette.common.black}},spinner:{margin:e.spacing(3,4)},firstSpan:{padding:e.spacing(3,0,0,3),fontWeight:"bolder",fontSize:"1.25rem"},secondSpan:{padding:e.spacing(3,3,0,0),fontWeight:"bolder",fontSize:"1rem"}}}));function E(e){var a=e.chartData.items,t=void 0===a?[]:a,i=e.dates,r=void 0===i?{startDate:new Date,endDate:g()(new Date).add(1,"month").toDate()}:i,j=e.loading,l=Object(O.a)(e,["chartData","dates","loading"]),o=Object(u.useState)(),b=Object(s.a)(o,2),x=b[0],h=b[1],f=B();Object(u.useEffect)((function(){t&&!j&&h(t)}),[l,t]);return Object(n.jsx)(d.a,{className:f.paper,children:!j&&x?Object(n.jsxs)(P.c,{data:x,rootComponent:function(e){var a=Object.assign({},e);return Object(n.jsx)(P.c.Root,Object(c.a)(Object(c.a)({},a),{},{className:f.chart}))},children:[Object(n.jsx)(W.c,{factory:R.b}),Object(n.jsx)(P.b,{}),Object(n.jsx)(P.d,{}),Object(n.jsx)(P.a,{name:"Installations",valueField:"installations",argumentField:"page"}),Object(n.jsx)(P.a,{name:"Page",valueField:"page",argumentField:"page"}),Object(n.jsxs)("div",{className:f.titleWrapper,children:[Object(n.jsx)("span",{className:f.firstSpan,children:"Numar de utilizatori"}),Object(n.jsxs)("span",{className:f.secondSpan,children:[g()(r.startDate).format("DD MMM")," - ",g()(r.endDate).format("DD MMM")]})]})]}):Object(n.jsx)(p.a,{className:f.spinner})})}var F=t(1518),L=t(3),Y=Object(i.a)((function(e){return{paper:{background:e.palette.primary.light,padding:e.spacing(2,5),"& h5":{fontWeight:"bolder"}},tabsPaper:{background:e.palette.primary.light,paddingLeft:e.spacing(5),"& button":{color:e.palette.common.white}},offset:{margin:e.spacing(4,0,0,5)},fullWidth:{width:"100%"},installationsOffset:{paddingLeft:e.spacing(1.5)},centered:{display:"flex",justifyContent:"center",alignItems:"center"},leftButton:{textTransform:"uppercase",padding:e.spacing(.75,4),borderRadius:0},installationsPaper:{padding:e.spacing(2,4),"& h4":{fontWeight:"bolder"}},installations:{fontSize:"25px","& > span":{fontSize:"40px","& span":{color:"gray",fontSize:"20px"}}},padding:{padding:e.spacing(3,0)},indicator:{backgroundColor:"#fff"}}})),q=new Date,V=g()(q).add(1,"month").toDate();function J(){var e=Object(u.useState)({tabValue:0,tableData:[],cardInfo:{}}),a=Object(s.a)(e,2),t=a[0],i=a[1],O=Object(u.useState)({startDate:q,endDate:V}),x=Object(s.a)(O,2),h=x[0],f=x[1],g=Object(u.useState)(0),m=Object(s.a)(g,2),v=m[0],D=m[1],N=Object(u.useState)([]),w=Object(s.a)(N,2),y=w[0],C=w[1],I=Object(u.useState)(0),k=Object(s.a)(I,2),z=k[0],P=k[1],W=Object(u.useState)(!1),R=Object(s.a)(W,2),B=R[0],J=R[1],T=Y();Object(u.useEffect)((function(){U(h.startDate,h.endDate),A()}),[h]),Object(u.useEffect)((function(){var e=setInterval((function(){P((function(e){return e+1}))}),1e3);return(B||10===z)&&(clearInterval(e),P(0),A()),function(){return clearInterval(e)}}),[z,B]);var U=function(e,a){var t=Math.round((a-e)/864e5);D(t)},A=function(){return J(!0),Promise.all([F.a.get("/api/chart"),F.a.get("/api/table?startdate=".concat(h.startDate.toISOString(),"&enddate=").concat(h.endDate.toISOString())),F.a.get("/api/card")]).then((function(e){if(e.length){var a=e[0].data,n=e[1].data,s=e[2].data.data;C(a),i(Object(c.a)(Object(c.a)({},t),{},{tableData:n,cardInfo:s})),J(!1)}})).catch((function(e){J(!1),console.error(e)}))};return Object(n.jsx)(r.a,{container:!0,children:Object(n.jsxs)(r.a,{item:!0,xs:12,children:[Object(n.jsx)(d.a,{className:T.paper,elevation:0,square:!0,children:Object(n.jsx)(j.a,{variant:"h5",children:"Dashboard"})}),Object(n.jsx)(d.a,{className:T.tabsPaper,elevation:3,square:!0,children:Object(n.jsxs)(l.a,{classes:{indicator:T.indicator},value:t.tabValue,onChange:function(e,a){i(Object(c.a)(Object(c.a)({},t),{},{tabValue:a}))},children:[Object(n.jsx)(o.a,{label:"Chart"}),Object(n.jsx)(o.a,{label:"Report"})]})}),Object(n.jsxs)(r.a,{container:!0,children:[Object(n.jsx)(r.a,{item:!0,xs:6,children:Object(n.jsx)(b.a,{className:Object(L.a)(T.offset,T.leftButton),color:"secondary",variant:"contained",children:"Configura Raport"})}),Object(n.jsx)(r.a,{item:!0,xs:6,className:T.centered,children:Object(n.jsx)(S,{onChangeDates:function(e){f(Object(c.a)(Object(c.a)({},h),{},{startDate:e[0],endDate:e[1]}))},dates:[h.startDate,h.endDate],daysBetweenDates:v})})]}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)(r.a,{container:!0,className:T.installationsOffset,children:Object(n.jsx)(r.a,{item:!0,children:Object(n.jsx)(d.a,{elevation:4,square:!0,className:T.installationsPaper,children:B?Object(n.jsx)(p.a,{}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(j.a,{variant:"h4",children:"Instalari pe dispozitive active"}),Object(n.jsx)("div",{className:T.installations,children:Object(n.jsxs)("span",{children:[t.cardInfo.monthlyInstallation," ",Object(n.jsxs)("span",{children:["+ ",t.cardInfo.prevMonthComparison,"% vs previous ",v," days"]})]})})]})})})}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)(r.a,{container:!0,children:Object(n.jsx)(r.a,{item:!0,xs:11,className:T.centered,children:Object(n.jsx)("div",{className:T.fullWidth,children:Object(n.jsx)(E,{chartData:y,dates:h,loading:B})})})}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)(r.a,{container:!0,children:Object(n.jsx)(r.a,{item:!0,xs:11,className:T.centered,children:Object(n.jsx)(M,{data:t.tableData,loading:B})})}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{})]})})}}}]);
//# sourceMappingURL=6.206a385f.chunk.js.map